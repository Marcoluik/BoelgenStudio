---

---

<div
    id="cart-drawer"
    class="fixed inset-0 z-[100] pointer-events-none invisible overflow-hidden"
>
    {/* Backdrop */}
    <div
        id="cart-backdrop"
        class="absolute inset-0 bg-black/60 backdrop-blur-sm opacity-0 transition-opacity duration-700"
    >
    </div>

    {/* Drawer Panel */}
    <div
        id="cart-panel"
        class="absolute top-0 right-0 w-full max-w-md h-full bg-[#000d12] translate-x-full transition-transform duration-700 ease-expo shadow-2xl border-l border-white/5 pointer-events-auto"
    >
        {/* Atmospheric Glow */}
        <div
            class="absolute top-0 right-0 w-full h-full pointer-events-none overflow-hidden"
        >
            <div
                class="absolute top-[-10%] right-[-10%] w-[80%] h-[40%] bg-cyan-400/10 blur-[100px] rounded-full"
            >
            </div>
            <div
                class="absolute bottom-[10%] left-[-10%] w-[60%] h-[50%] bg-blue-300/5 blur-[80px] rounded-full opacity-50"
            >
            </div>
        </div>

        <div class="relative z-10 h-full flex flex-col p-8 md:p-12">
            {/* Header */}
            <div class="flex justify-between items-center mb-16">
                <div class="space-y-2">
                    <div class="flex items-center gap-3">
                        <span class="w-6 h-[1px] bg-cyan-700"></span>
                        <span
                            class="text-cyan-500/60 text-[9px] tracking-[0.6em] font-medium uppercase"
                            >Selection</span
                        >
                    </div>
                    <h2
                        class="text-white text-3xl font-light tracking-[0.2em] uppercase"
                    >
                        Archive Bag
                    </h2>
                </div>
                <button id="close-cart" class="group p-2">
                    <span
                        class="text-white/40 group-hover:text-white transition-colors duration-500 text-[10px] tracking-widest uppercase font-light"
                        >Close</span
                    >
                </button>
            </div>

            {/* Cart Items (Empty State for now) */}
            <div
                class="flex-grow flex flex-col items-center justify-center text-center space-y-8"
            >
                <div class="w-20 h-[1px] bg-white/10"></div>
                <div class="space-y-4">
                    <p
                        class="text-white/20 text-[10px] tracking-[0.8em] uppercase font-light"
                    >
                        Bag is currently empty
                    </p>
                    <div class="flex justify-center">
                        <a
                            href="/#shop"
                            id="continue-shopping"
                            class="text-cyan-500/40 hover:text-cyan-400 transition-colors text-[9px] tracking-[0.4em] uppercase border-b border-cyan-500/10 pb-1"
                            >Begin Exploring</a
                        >
                    </div>
                </div>
                <div class="w-20 h-[1px] bg-white/10"></div>
            </div>

            {/* Footer / Checkout */}
            <div
                class="mt-auto space-y-8 pt-12 border-t border-white/5 opacity-40"
            >
                <div class="flex justify-between items-end">
                    <span
                        class="text-white/40 text-[10px] tracking-widest uppercase font-light"
                        >Subtotal</span
                    >
                    <span class="text-white text-xl font-light tracking-widest"
                        >0.00 DKK</span
                    >
                </div>

                <div class="space-y-4">
                    <button
                        class="w-full py-6 border border-white/10 text-white/40 text-[10px] tracking-[0.6em] uppercase relative group overflow-hidden cursor-not-allowed"
                    >
                        <span class="relative z-10 font-light italic"
                            >Selection Required</span
                        >
                    </button>
                    <p
                        class="text-[9px] text-white/20 tracking-[0.2em] uppercase text-center"
                    >
                        Shipping and taxes calculated at checkout
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    import gsap from "gsap";

    const cartBtn = document.querySelector('[aria-label="Kurv"]');
    const closeBtn = document.getElementById("close-cart");
    const backdrop = document.getElementById("cart-backdrop");
    const drawer = document.getElementById("cart-drawer");
    const panel = document.getElementById("cart-panel");
    const continueBtn = document.getElementById("continue-shopping");

    const openCart = () => {
        if (!drawer || !panel || !backdrop) return;
        drawer.classList.remove("invisible");
        drawer.classList.add("pointer-events-auto");

        gsap.to(backdrop, { opacity: 1, duration: 0.8, ease: "power2.out" });
        gsap.to(panel, { x: 0, duration: 1.2, ease: "expo.out" });
    };

    const closeCart = () => {
        if (!drawer || !panel || !backdrop) return;
        gsap.to(panel, { x: "100%", duration: 0.8, ease: "power2.inOut" });
        gsap.to(backdrop, {
            opacity: 0,
            duration: 0.6,
            onComplete: () => {
                drawer.classList.add("invisible");
                drawer.classList.remove("pointer-events-auto");
            },
        });
    };

    cartBtn?.addEventListener("click", openCart);
    closeBtn?.addEventListener("click", closeCart);
    backdrop?.addEventListener("click", closeCart);
    continueBtn?.addEventListener("click", closeCart);

    // Make global for other components
    (window as any).openCart = openCart;
</script>

<style>
    .ease-expo {
        transition-timing-function: cubic-bezier(0.16, 1, 0.3, 1);
    }
</style>
